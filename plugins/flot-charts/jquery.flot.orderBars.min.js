!function(r){function a(r){function u(r,t,i){var o=null;if(s(t)&&(b(t),l(r),v(r),d(t),n>=2)){var u=g(t),f=0,h=p();f=W(u)?-1*w(a,u-1,Math.floor(n/2)-1)-h:w(a,Math.ceil(n/2),u-2)+h+2*e,o=D(i,t,f),i.points=o}return o}function s(r){return null!=r.bars&&r.bars.show&&null!=r.bars.order}function l(r){var a=o?r.getPlaceholder().innerHeight():r.getPlaceholder().innerWidth(),n=o?f(r.getData(),1):f(r.getData(),0),t=n[1]-n[0];i=t/a}function f(r,a){for(var n=new Array,t=0;t<r.length;t++)n[0]=r[t].data[0][a],n[1]=r[t].data[r[t].data.length-1][a];return n}function v(r){a=h(r.getData()),n=a.length}function h(r){for(var a=new Array,n=0;n<r.length;n++)null!=r[n].bars.order&&r[n].bars.show&&a.push(r[n]);return a.sort(c)}function c(r,a){var n=r.bars.order,t=a.bars.order;return t>n?-1:n>t?1:0}function d(r){t=r.bars.lineWidth?r.bars.lineWidth:2,e=t*i}function b(r){r.bars.horizontal&&(o=!0)}function g(r){for(var n=0,t=0;t<a.length;++t)if(r==a[t]){n=t;break}return n+1}function p(){var r=0;return n%2!=0&&(r=a[Math.ceil(n/2)].bars.barWidth/2),r}function W(r){return r<=Math.ceil(n/2)}function w(r,a,n){for(var t=0,i=a;n>=i;i++)t+=r[i].bars.barWidth+2*e;return t}function D(r,a,n){for(var t=r.pointsize,e=r.points,i=0,u=o?1:0;u<e.length;u+=t)e[u]+=n,a.data[i][3]=e[u],i++;return e}var a,n,t,e,i=1,o=!1;r.hooks.processDatapoints.push(u)}var n={series:{bars:{order:null}}};r.plot.plugins.push({init:a,options:n,name:"orderBars",version:"0.2"})}(jQuery);